{
  "info": {
    "_postman_id": "15fdf267-aff2-4172-825a-6f586f6e2d82",
    "name": "Ondemand_Authorization_Api",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "Hente gyldig accesstoken med riktig scope",
      "item": [
        {
          "name": "seleniumsession",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d8b2c24d-e0ff-4735-a53e-d1fd6c1e91b7",
                "exec": [
                  "var jsonData=pm.response.json();",
                  "pm.globals.set(\"session\",jsonData.sessionId);"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "c4c5fcd8-2e4a-4d98-a20e-5576219311fe",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "610c93c9-8dee-402c-8a00-cedaede65ed6",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"desiredCapabilities\": {\r\n        \"caps\": {\r\n            \"nativeEvents\": false,\r\n            \"browserName\": \"chrome\",\r\n            \"version\": \"\",\r\n            \"platform\": \"ANY\"\r\n        }\r\n    }\r\n}"
            },
            "url": "http://chromedriver:4444/session",
            "description": "\n"
          },
          "response": []
        },
        {
          "name": "redirecturl",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "f32d6f05-2e34-4788-9d50-03fd801eb09e",
                "exec": [
                  "pm.environment.get(\"oidc_url\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "4438439c-8841-4fee-8bae-cb0151aaeaec",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"url\":\"{{oidc_url}}\"}\n"
            },
            "url": "http://chromedriver:4444/session/{{session}}/url"
          },
          "response": []
        },
        {
          "name": "elementonthispage",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4d4bd4ba-154b-4b05-923d-64e1d36be0a1",
                "exec": [
                  "pm.test(\"element id for MinID check \", function () {",
                  "    var jsonData = pm.response.json();",
                  "    ",
                  "    pm.globals.set(\"minid_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "9c8c49eb-1858-4c26-a041-6de5b3df6e4b",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "d71fc9d6-5fbe-4a03-9787-d9473264bea4",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/x-www-form-urlencoded",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"MinIDChain\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clickonminid",
          "_postman_id": "88079a71-c3d7-4a47-abdc-dcd1d5d89f37",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{minid_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getelementidssn",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "189f83ec-8efd-438c-b133-0fbc201abad0",
                "exec": [
                  "",
                  "pm.test(\"element id for SSN \", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"elemntid for SSN\",jsonData);",
                  "    pm.globals.set(\"ssn_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "7f27e4b5-1edf-4b90-b7fa-69a82fd2825c",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_USERNAME_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "getelementidpassword",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8929c791-35e2-41f7-8b0b-8678e9309e58",
                "exec": [
                  "pm.test(\"element id for Password \", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"elemntid for Password\",jsonData);",
                  " pm.globals.set(\"password_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "3fd4577d-e541-440e-abe6-41da87f2e7d9",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_PASSWORD_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setssn",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e65befc8-4e49-43f6-a2bc-3ebfdc77a6dc",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "7807cfbd-2eac-4a55-a910-4520b15ef28e",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"{{ssn}}\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{ssn_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "setpassword",
          "_postman_id": "cd8f9e0c-e4a7-473d-b91d-61c8d71a9b6b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"password01\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{password_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "submit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d4ee6a6d-0d1e-4948-aaa6-a2829f185475",
                "exec": [
                  "pm.test(\"next_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"elemntid for Submit \",jsonData);",
                  " pm.globals.set(\"next_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "1a5833aa-74b7-4097-a7cd-bb7c90911301",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"nextbtn\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clicksubmit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e75ea17b-88ea-4c32-b35f-8758d03c48c1",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "2d006644-a324-455f-886a-f9c986c6dcef",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{next_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "pinnumberid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "49f2b57c-29a8-41bf-9041-7400083bf039",
                "exec": [
                  "pm.test(\"pin_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"elemntid for pin_elementid \",jsonData);",
                  "    pm.globals.set(\"pin_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "f120dec4-3ce7-43b3-81ae-cd961493b686",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_PINCODE1_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setppin",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "95b50532-96b7-405c-afd1-52b576a70e9f",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "73a43f50-7191-407e-b097-d26ea412f28a",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"12345\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{pin_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "getsubmitid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "02b4c223-cb45-4310-b064-d60510887571",
                "exec": [
                  "pm.test(\"submit_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"elemntid for submit_elementid\",jsonData);",
                  " pm.globals.set(\"submit_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "1d7e07ff-76f5-477e-ad9c-a2e8a1128ab6",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"nextbtn\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "finalsubmit ",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0de524ce-dcc1-4d90-b06a-0f98d165767a",
                "exec": [
                  "pm.test(\"final submit_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"elemntid for final submit\",jsonData);",
                  " ",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "1ecfec2a-ec09-459e-a438-0ff9dc8b1a2f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{submit_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getcontinueconfirmelementid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3bf0188b-39cd-451f-9f16-65cec9bf825f",
                "exec": [
                  "pm.test(\"find element id for continueconfirm_elementid \", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"continueconfirm_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "1ce89741-fc02-42a4-ac44-0a7562fca056",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"name\",\"value\":\"consentAccepted\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clickcontinueconfirm",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "13186b31-b18c-4997-b7d3-c6e21c0a0b26",
                "exec": [
                  "pm.test(\"continue confirm elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"continue confirm elementid\",jsonData);",
                  " ",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "c0bb7e32-064c-4062-8ca8-3832b154ce39",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{continueconfirm_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getcontinueelementid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "3bf0188b-39cd-451f-9f16-65cec9bf825f",
                "exec": [
                  "pm.test(\"find element id for continue_elementid \", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"continue_elementid\", jsonData.value.ELEMENT);",
                  "  console.log('find element id for continue_elementid jsonData',jsonData);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "7ea2a77a-3547-4d53-b2ba-4c0750716220",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"continuebtn\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clickcontinue",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ccbc2f5c-279b-4c9d-adda-c7e36271319c",
                "exec": [
                  "pm.test(\"continue elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"continue elementid\",jsonData);",
                  " ",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "b33ff5b7-5fc8-4bb3-a313-09b53d9a1c60",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{continue_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "geturl",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1f7f3145-59f9-4cb0-87a2-595e043a1c7c",
                "exec": [
                  "pm.test(\"Access Token test\", function () {\r",
                  " var jsonData = pm.response.json();\r",
                  "        var tokens=jsonData.value;\r",
                  "        var temptoken=tokens.split('access_token:').pop();\r",
                  "        console.log(\"access_token from systest\",temptoken);\r",
                  "        var refreshtokenpos=temptoken.lastIndexOf(\"id_token\");\r",
                  "        var finaltoken = temptoken.substring(1,refreshtokenpos-1);  \r",
                  "        console.log(\"access_token from finaltokenwithurl\",finaltoken);\r",
                  "        var access_token_trim= finaltoken.substring(30);\r",
                  "        console.log(\"access_token from systest\",access_token_trim);\r",
                  "        pm.environment.set(\"access_token\",access_token_trim);\r",
                  "\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "b2da3edc-dc5a-4d07-8fda-5388a2ff5243",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/url"
          },
          "response": []
        }
      ],
      "_postman_id": "e3959fb3-8f70-41d0-9c74-a73835629e33"
    },
    {
      "name": "authorizaion-controller (happytest)",
      "item": [
        {
          "name": "getAllAuthorizationsForSpecificUser",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "61a954e2-854d-478e-bf69-17ac9f947721",
                "exec": [
                  "",
                  "",
                  "",
                  "pm.test(\"Test will check auth id and auth name\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"test for auth id  i atest milj\u00f8\",jsonData); ",
                  "    pm.globals.set(\"authorization_id\", jsonData[0].authorization_id);",
                  "    console.log(\"authorization id \",pm.globals.get(\"authorization_id\")); ",
                  "",
                  "    ",
                  "console.log(\"header : \" + request.headers[\"Content-Type\"]);",
                  "console.log(\"body : \" + request.data);",
                  "console.log(\"url : \" + request.url);",
                  "    ",
                  "});",
                  "",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "594db087-b812-4c83-922e-9692856feede",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{access_token}}"
              }
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "{{apiurl}}"
          },
          "response": []
        },
        {
          "name": "getAllrequires_user_consent=false",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d8d5a72c-e96d-42fd-85ea-3209779b76e5",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {\r",
                  "    pm.response.to.have.status(200);\r",
                  "});\r",
                  "pm.test(\"Test will check client id and client name\", function () {\r",
                  "    var jsonData = pm.response.json();\r",
                  "  //  pm.expect(jsonData[0].client_id).to.eql(\"oidc_zap_api_test_client\");\r",
                  "//    pm.expect(jsonData[0].client_name).to.eql(\"ZAP API TEST CLIENT\");\r",
                  "    \r",
                  "pm.globals.set(\"authorization_id\", jsonData[0].authorization_id);\r",
                  "    \r",
                  "});\r",
                  "\r",
                  "\r",
                  "pm.test(\"response must be valid and have a body\", function () {\r",
                  "     // assert that the status code is 200\r",
                  "     pm.response.to.be.ok; // info, success, redirection, clientError,  serverError, are other variants\r",
                  "     // assert that the response has a valid JSON body\r",
                  "     pm.response.to.be.withBody;\r",
                  "     pm.response.to.be.json; // this assertion also checks if a body  exists, so the above check is not needed\r",
                  "});\r",
                  "\r",
                  "pm.test(\"response should be okay to process\", function () { \r",
                  "    pm.response.to.not.be.error; \r",
                  "    pm.response.to.not.have.jsonBody(\"error\"); \r",
                  "});\r",
                  "pm.test(\"Content-Type is present\", function () {\r",
                  "    pm.response.to.have.header(\"Content-Type\");\r",
                  "});\r",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "e3ba98e2-e09e-471b-ba8f-e99d8ceb1c7f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{access_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{apiurl}}/client/authorizations?requires_user_consent=false",
              "host": [
                "{{apiurl}}"
              ],
              "path": [
                "client",
                "authorizations"
              ],
              "query": [
                {
                  "key": "requires_user_consent",
                  "value": "false"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "revokeAuthorizationsForSpecificUser",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "61a954e2-854d-478e-bf69-17ac9f947721",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "4a4879eb-af0a-457a-b6df-0c41da19ec60",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{access_token}}"
              }
            },
            "method": "DELETE",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "{{apiurl}}{{authorization_id}}"
          },
          "response": []
        },
        {
          "name": "getRevokedAccessTokenList",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "61a954e2-854d-478e-bf69-17ac9f947721",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "pm.test(\"Test will check client id and client name\", function () {",
                  "    var jsonData = pm.response.json();",
                  "  //  pm.expect(jsonData[0].client_id).to.eql(\"oidc_zap_api_test_client\");",
                  "//    pm.expect(jsonData[0].client_name).to.eql(\"ZAP API TEST CLIENT\");",
                  "    ",
                  "//pm.globals.set(\"jti\", jsonData[0].jti);",
                  "//    console.write(jsonData[0].jti);",
                  "});",
                  "",
                  "",
                  "pm.test(\"response must be valid and have a body\", function () {",
                  "     // assert that the status code is 200",
                  "     pm.response.to.be.ok; // info, success, redirection, clientError,  serverError, are other variants",
                  "     // assert that the response has a valid JSON body",
                  "     pm.response.to.be.withBody;",
                  "     pm.response.to.be.json; // this assertion also checks if a body  exists, so the above check is not needed",
                  "});",
                  "",
                  "pm.test(\"response should be okay to process\", function () { ",
                  "    pm.response.to.not.be.error; ",
                  "    pm.response.to.not.have.jsonBody(\"error\"); ",
                  "});",
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "bb25a82f-07d9-4aae-a53f-5f062cbb60f1",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{access_token}}"
              }
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": "{{oidc_provider_url}}/revokelist"
          },
          "response": []
        },
        {
          "name": "deleteExpiredRevokedAccessTokens",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "61a954e2-854d-478e-bf69-17ac9f947721",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "873afc9b-4260-425f-83eb-fee59b39740a",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{access_token}}"
              }
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "url": "{{oidc_provider_url}}/admin/tasks/revokedAccessTokens/removeExpired"
          },
          "response": []
        },
        {
          "name": "deleteSession",
          "_postman_id": "8b32bccf-6585-4a6c-96d1-1d29c270cab0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "DELETE",
            "header": [],
            "url": "http://localhost:9515/session/{{session}}"
          },
          "response": []
        }
      ],
      "_postman_id": "cb62e17f-947b-44a8-a573-30b9601b49f0",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "fdd6a0f3-9720-4708-b249-49c97c5ee3d9",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "a56e6e85-57e1-4a08-9f94-a30bc6a08527",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        }
      ]
    },
    {
      "name": "Hente gyldig accesstoken med feil scope",
      "item": [
        {
          "name": "seleniumsession",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d8b2c24d-e0ff-4735-a53e-d1fd6c1e91b7",
                "exec": [
                  "var jsonData=pm.response.json();",
                  "pm.globals.set(\"session\",jsonData.sessionId);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "54683f98-9445-46b0-a27a-51583dc03830",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"desiredCapabilities\": {\r\n        \"caps\": {\r\n            \"nativeEvents\": false,\r\n            \"browserName\": \"chrome\",\r\n            \"version\": \"\",\r\n            \"platform\": \"ANY\"\r\n        }\r\n    }\r\n}"
            },
            "url": "http://chromedriver:4444/session",
            "description": "\n"
          },
          "response": []
        },
        {
          "name": "redirecturl",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "f32d6f05-2e34-4788-9d50-03fd801eb09e",
                "exec": [
                  "pm.environment.get(\"oidc_utl_without_scope\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "aa7b15c4-25dc-4e0d-822d-7411c9744fbf",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"url\":\"{{oidc_url_without_scope}}\"}\n"
            },
            "url": "http://chromedriver:4444/session/{{session}}/url"
          },
          "response": []
        },
        {
          "name": "elementonthispage",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4d4bd4ba-154b-4b05-923d-64e1d36be0a1",
                "exec": [
                  "pm.test(\"element if for MinID \", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"minid_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "e4efc650-59b2-407a-81d1-3a5f2aabca99",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/x-www-form-urlencoded",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"MinIDChain\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clickonminid",
          "_postman_id": "b7450cd1-6744-4381-b6a3-82e1d6f0e6ae",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{minid_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getelementidssn",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "189f83ec-8efd-438c-b133-0fbc201abad0",
                "exec": [
                  "var jsonData = pm.response.json();",
                  " pm.globals.set(\"ssn_elementid\", jsonData.value.ELEMENT);",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "778e56a1-ad80-40d6-adea-7bab71d9f9c2",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_USERNAME_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "getelementidpassword",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8929c791-35e2-41f7-8b0b-8678e9309e58",
                "exec": [
                  "var jsonData = pm.response.json();",
                  " pm.globals.set(\"password_elementid\", jsonData.value.ELEMENT);",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "0531f4f3-533a-4fc2-8c0e-82adb0d3644f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_PASSWORD_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setssn",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e65befc8-4e49-43f6-a2bc-3ebfdc77a6dc",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "d5c2c3c9-f577-4c24-a9b6-6a2cf12b96bc",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"{{ssn}}\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{ssn_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "setpassword",
          "_postman_id": "85622699-0b63-45b8-babb-d4e910ffee5f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"password01\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{password_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "submit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d4ee6a6d-0d1e-4948-aaa6-a2829f185475",
                "exec": [
                  "pm.test(\"next_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"next_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "a8d2d45c-673d-48af-b4b5-9beb419f3ef9",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"nextbtn\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clicksubmit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e75ea17b-88ea-4c32-b35f-8758d03c48c1",
                "exec": [
                  "setTimeout(checkStatusCode, 500);\r",
                  "\r",
                  "    function checkStatusCode() {\r",
                  "\r",
                  "        pm.sendRequest('https://postman-echo.com/get', function (err, res) {\r",
                  "\r",
                  "            tests['status code should be 200']= res.code ===200;\r",
                  "\r",
                  "        });\r",
                  "    }"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "1bf3e3a5-a2c5-41a3-901f-2cc34ea8b757",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{next_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "pinnumberid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "49f2b57c-29a8-41bf-9041-7400083bf039",
                "exec": [
                  "pm.test(\"pin_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"pin_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "af4531c7-2dc4-4691-9d09-f9fa30b49830",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_PINCODE1_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setppin",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "95b50532-96b7-405c-afd1-52b576a70e9f",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "7516f292-122d-48a0-9863-03b9ab715371",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"12345\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{pin_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "getsubmitid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "02b4c223-cb45-4310-b064-d60510887571",
                "exec": [
                  "pm.test(\"submit_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"submit_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "bb0589b8-330b-45ab-9a9a-223185bbfd56",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"nextbtn\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "finalsubmit ",
          "_postman_id": "9edaeafd-6dea-4247-b57d-7536223da800",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{submit_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getconsentid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "02b4c223-cb45-4310-b064-d60510887571",
                "exec": [
                  "pm.test(\"consent_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"consent_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "48b6f025-a870-47a7-93ee-cdcf78bfaabf",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"name\",\"value\":\"consentAccepted\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "acceptconsent",
          "_postman_id": "a7d88d32-987c-448a-85ef-60594a03cf2d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "file",
              "file": {
                "src": ""
              }
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{consent_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "geturl",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1f7f3145-59f9-4cb0-87a2-595e043a1c7c",
                "exec": [
                  "pm.test(\"Access Token test\", function () {\r",
                  "        var jsonData = pm.response.json();\r",
                  "        var tokens=jsonData.value;\r",
                  "        var temptoken=tokens.split('access_token:').pop();\r",
                  "        console.log(\"access_token from atest\",temptoken);\r",
                  "        var refreshtokenpos=temptoken.lastIndexOf(\"token_type\");\r",
                  "        var finaltoken = temptoken.substring(1,refreshtokenpos-1);  \r",
                  "        console.log(\"access_token from finaltokenwithurl\",finaltoken);\r",
                  "        var access_token_trim= finaltoken.substring(30);\r",
                  "        console.log(\"access_token from atest\",access_token_trim);\r",
                  "        pm.environment.unset(\"invalid_token\");\r",
                  "        pm.environment.set(\"invalid_token\", access_token_trim);\r",
                  "\r",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "796ce3f1-c92a-4ba8-ae4a-51bed6317824",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/url"
          },
          "response": []
        }
      ],
      "_postman_id": "87d7ccfe-23d7-4d74-8040-f918d7bd30ff"
    },
    {
      "name": "authorizaion-controller (feilhandtering)",
      "item": [
        {
          "name": "401",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "61a954e2-854d-478e-bf69-17ac9f947721",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "298b753e-f7bc-41a3-84d3-c961fa8ec73b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{invalid_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{apiurl}}"
          },
          "response": []
        },
        {
          "name": "revoke 401",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "61a954e2-854d-478e-bf69-17ac9f947721",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "32efb6c8-4338-477e-a375-bb702974bb83",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{invalid_token}}"
              }
            },
            "method": "DELETE",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "{{apiurl}}{{authorization_id}}"
          },
          "response": []
        },
        {
          "name": "401 inalidAccessToken",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bf7e1a80-c92c-4225-b7fe-db69a3dcc0bd",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  "",
                  "pm.test(\"response should be okay to process\", function () { ",
                  "    pm.response.to.be.error; ",
                  "    pm.response.to.have.jsonBody(\"error\"); ",
                  "});",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "4960d714-5138-4594-ba12-ef57c95edaa9",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{invalid_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "url": "{{apiurl}}"
          },
          "response": []
        },
        {
          "name": "401 WithoutAccessToken",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "bf7e1a80-c92c-4225-b7fe-db69a3dcc0bd",
                "exec": [
                  "pm.test(\"Status code is 401\", function () {",
                  "    pm.response.to.have.status(401);",
                  "});",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "d3159304-1307-4a72-85dc-394acfd2b690",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "url": "{{apiurl}}"
          },
          "response": []
        }
      ],
      "_postman_id": "c4546a47-ab74-439c-b19b-899b0556cdc9"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": {
      "token": "{{access_token}}"
    }
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "b71ac78d-86db-4dbc-9cdd-cb630b63eff3",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "a52cbc17-d311-4f2d-a72d-3bca59a65b8c",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ]
}
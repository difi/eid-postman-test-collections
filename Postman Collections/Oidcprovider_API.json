{
  "info": {
    "_postman_id": "b162ef8c-9501-404f-8b87-2eb1f8e8643c",
    "name": "Oidcprovider API",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "Hente gyldig accesstoken med riktig scopen",
      "item": [
        {
          "name": "seleniumsession",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d9b32176-3b8c-4962-8ae3-e0b90fb29583",
                "exec": [
                  "",
                  "pm.test(\"Status code is 200\", function () {",
                  "  var jsonData=pm.response.json();",
                  "pm.globals.set(\"session\",jsonData.sessionId);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "3a743198-2b1b-4a2e-b34f-354515a53c8c",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"desiredCapabilities\": {\r\n        \"caps\": {\r\n            \"nativeEvents\": false,\r\n            \"browserName\": \"chrome\",\r\n            \"version\": \"\",\r\n            \"platform\": \"ANY\"\r\n        }\r\n    }\r\n}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session",
            "description": "\n"
          },
          "response": []
        },
        {
          "name": "redirecturl",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "a6d53da7-d427-4040-83df-a919ec340219",
                "exec": [
                  "",
                  "pm.environment.get(\"oidc_url_serviceprovider\");"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "602b43b9-a7ac-40c3-9654-86b7e3d917aa",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"url\":\"{{idporten_oidc_client_url}}\"}\n",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/url"
          },
          "response": []
        },
        {
          "name": "finalsubmit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "5d10c652-140f-468d-892a-63afdbdcd505",
                "exec": [
                  "pm.test(\"submit_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"crtlink\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "8f62c0a9-39c0-4800-8aa2-4ed771f7b529",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"details-button\"}",
              "options": {}
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "finalsubmit",
          "_postman_id": "b3590d52-f9b9-4419-95bb-2d411190ef32",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {}
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{crtlink}}/click"
          },
          "response": []
        },
        {
          "name": "finalsubmit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8affeedd-f325-4b3f-8be0-cb22cce76a27",
                "exec": [
                  "pm.test(\"submit_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"link\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "0be24c1d-3c1f-479c-82b4-56070a7722e5",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"proceed-link\"}",
              "options": {}
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "finalsubmit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2c89fd76-2447-45c1-abd7-5a44d359bfe4",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "24702a33-0fb9-47ed-9d62-79d008efbae3",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {}
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{link}}/click"
          },
          "response": []
        },
        {
          "name": "findclientelementid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "255575ea-6212-4efe-8459-7f9e6c794382",
                "exec": [
                  "pm.test(\"find element id for client_id \", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"clientid\", jsonData.value.ELEMENT);",
                  " ",
                  "console.log(pm.globals.get(\"clientid\"));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "cddb1e42-a5b9-45ff-bc01-ad2810c30a71",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"name\",\"value\":\"client_id\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "selectdropdown",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "f9b5da7e-322f-4664-a5d1-71f3598b888f",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "700fad29-de4a-48f5-b74f-69df39ba5d95",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n\t\"value\":{{client_drop_down}}\r\n}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{clientid}}/value"
          },
          "response": []
        },
        {
          "name": "findscopeid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "10547640-b0cf-4b30-8747-7372b3f04ef7",
                "exec": [
                  "pm.test(\"Scope element id\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"scope\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "6ad37d37-d8a0-43d6-a469-584f360a115a",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"name\",\"value\":\"scope\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setscope",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "3eb62535-8f86-4b5f-a491-87fd12802206",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "765c166b-0787-4246-bc81-ebdaa1051d26",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"   idporten:user.log.read user/varslingsstatus.read idporten:user.log.all.read user/sikkerdigitalpost.read tokeninfo user/spraak.read user/spraak.write user/kontaktinformasjon.read krr:user.log.all.read idporten:dcr.read idporten:dcr.write idporten:dcr.modify\"]}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{scope}}/value"
          },
          "response": []
        },
        {
          "name": "findloginelementid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "ebbcbe1a-830c-4fed-ba96-92922b22c06f",
                "exec": [
                  "pm.test(\"Your test name\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"loginid\", jsonData.value.ELEMENT);",
                  "",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "ab110eaf-e6a3-4a84-9511-b11c8d876249",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"login\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clicklogin",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "0f6b144b-00da-4ea4-a070-24c238e2a653",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "ac595cf2-baad-45e5-9ad0-3ec92551a1bf",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "f7bfd646-1794-4a4b-86e7-7eff8058cd49",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{loginid}}/click"
          },
          "response": []
        },
        {
          "name": "elementonthispage",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "533259e2-0a23-4320-890a-ee6780227dd2",
                "exec": [
                  "pm.test(\"element if for MinID \", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"minid_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "8bbc91f0-73fe-4716-ad3e-238a3ea9cd5e",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/x-www-form-urlencoded",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"MinIDChain\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clickonminid",
          "_postman_id": "4d83f642-ef15-4a55-bf81-b24f31b9c23d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{minid_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getelementidssn",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "c8791fe1-f866-4088-bd3a-4331768ccd59",
                "exec": [
                  "var jsonData = pm.response.json();",
                  " pm.globals.set(\"ssn_elementid\", jsonData.value.ELEMENT);",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "40cfe85a-3c12-456f-88ab-9d65242e2dfa",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_USERNAME_IDPORTEN\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "getelementidpassword",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2bdc1393-fba7-488d-b764-c6624b9b471a",
                "exec": [
                  "var jsonData = pm.response.json();",
                  " pm.globals.set(\"password_elementid\", jsonData.value.ELEMENT);",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "5db211a7-6373-4812-aa4a-3af02a5bdf41",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_PASSWORD_IDPORTEN\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setssn",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "1128c4c0-0418-45ae-9e65-4219acf6e837",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "f3e7cfba-153b-42e5-be41-58cd9438b3e6",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"{{ssn}}\"]}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{ssn_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "setpassword",
          "_postman_id": "eb1e642c-85f5-4622-b1e8-cb6963758dd0",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"password01\"]}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{password_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "submit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9361fead-78e3-41bc-b65e-1187c08cd998",
                "exec": [
                  "pm.test(\"next_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"next_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "e410a4d6-df32-4be5-a73e-d5f511752e32",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"nextbtn\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clicksubmit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "2a026c10-6de1-4c3b-95c6-b5ff27158e27",
                "exec": [
                  "setTimeout(checkStatusCode, 500);\r",
                  "\r",
                  "    function checkStatusCode() {\r",
                  "\r",
                  "        pm.sendRequest('https://postman-echo.com/get', function (err, res) {\r",
                  "\r",
                  "            tests['status code should be 200']= res.code ===200;\r",
                  "\r",
                  "        });\r",
                  "    }"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "2a1b3bcb-2082-40a8-ad96-cd7d45c0c43f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{next_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "pinnumberid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "fba99326-f1f1-4e17-a106-2012066123f0",
                "exec": [
                  "pm.test(\"pin_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"pin_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "c893450d-823f-45b6-a8d7-9622dfeda47d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_PINCODE1_IDPORTEN\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setppin",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "26e9f9f2-4390-4da5-b710-311461c75e58",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "57bc08d2-0333-4053-a067-a96ea0502e16",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"12345\"]}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{pin_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "getsubmitid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d6693b57-f0ff-48ec-acb4-22c373ca5359",
                "exec": [
                  "pm.test(\"submit_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"submit_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "d93325b4-f640-4e0e-a131-939db2edf682",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"nextbtn\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "finalsubmit ",
          "_postman_id": "be2a3f8a-155a-4dd3-9664-0c907c38645c",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{submit_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getconsentid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "166bff37-14b0-4487-8249-37cc4ba9238a",
                "exec": [
                  "pm.test(\"consent_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"consent_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "712f93dd-c4df-45e8-8b74-97c8fb8a4cde",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"name\",\"value\":\"consentAccepted\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "acceptconsent",
          "_postman_id": "9e019139-1b26-4ae9-8e26-6322a8c8568e",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "file",
              "file": {
                "src": ""
              },
              "options": {
                "file": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{consent_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "gettokenid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e16a9f32-1a55-43ef-ad33-1228c66c0aef",
                "exec": [
                  "pm.test(\"token_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"token_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "eb70d4d0-000e-4af0-8874-5fc49d9e9632",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"get-tokens\"}",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "henttoken",
          "_postman_id": "3b0c7f65-2d0e-4abe-b021-c856d77f6c5d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "file",
              "file": {}
            },
            "url": "http://localhost:9515/session/{{session}}/element/{{token_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getTokensElements",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "9da57204-7173-4d55-b706-b5e425ed6dba",
                "exec": [
                  "pm.test(\"tokens\", function () {",
                  " var jsonData = pm.response.json();",
                  " console.log('tokens test jsonData',jsonData);",
                  " var tokens=jsonData.value;",
                  "  console.log('tokens test tokens',tokens);",
                  " var temptoken=tokens.split('access_token:').pop();",
                  "   console.log('tokens test temptoken',temptoken);",
                  " var refreshtokenpos=temptoken.lastIndexOf(\"refresh_token:\");",
                  "    console.log('tokens test refreshtokenpos',refreshtokenpos);",
                  " var token = temptoken.substring(1,refreshtokenpos-1);    ",
                  " pm.environment.set(\"oidctoken\", token);",
                  "     console.log('oidctoken test token',token);",
                  "",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "f4587982-0d82-4db0-8e6f-05399117be08",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "",
              "options": {
                "raw": {}
              }
            },
            "url": "http://localhost:9515/session/{{session}}/source"
          },
          "response": []
        }
      ],
      "_postman_id": "2c9ca18e-c0fb-4039-a767-268e2afe850b"
    },
    {
      "name": "/tokeninfo",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "9e64abfc-00a1-49d4-99b5-3a34a0641dd5",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "    ",
              "        var jsonData=pm.response.json();",
              "pm.environment.set(\"auth_id\",jsonData.active);",
              "   pm.expect(jsonData.active).to.eql(true);",
              "    pm.expect(jsonData.client_id).to.eql(\"test_rp_systest\");",
              "   pm.expect(jsonData.client_orgno).to.eql(\"991825827\");",
              "    pm.expect(jsonData.delegation_source).to.eql(\"https://eid-systest-web01.dmz.local/idporten-oidc-provider/\");",
              "",
              "",
              "});",
              "",
              ""
            ],
            "type": "text/javascript"
          }
        }
      ],
      "_postman_id": "52ce75ec-30e0-47f6-ac30-144f7330c09d",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": {
            "token": "{{oidctoken}}"
          }
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "name": "Content-Type",
            "value": "application/x-www-form-urlencoded",
            "type": "text"
          },
          {
            "key": "Accept",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "urlencoded",
          "urlencoded": [
            {
              "key": "token",
              "value": "{{oidctoken}}",
              "type": "text"
            }
          ],
          "options": {
            "urlencoded": {}
          }
        },
        "url": "{{oidc_provider}}tokeninfo"
      },
      "response": []
    },
    {
      "name": "/userinfo",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "5b377bbe-83c8-4893-a836-096ea3e592ce",
            "exec": [
              "pm.test(\"Status code is 200\", function () {",
              "    pm.response.to.have.status(200);",
              "   ",
              "    ",
              "        var jsonData=pm.response.json();",
              "   ",
              "   pm.environment.set(\"auth_id\",jsonData.active);",
              "    pm.expect(jsonData.pid).to.eql(\"23079403164\");",
              "    pm.expect(jsonData.locale).to.eql( \"nb\");",
              "    ",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "_postman_id": "7385fdde-5dab-4aef-ad0c-95ffe112728e",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": {
            "token": "{{oidctoken}}"
          }
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "name": "Content-Type",
            "value": "application/x-www-form-urlencoded",
            "type": "text"
          }
        ],
        "body": {
          "mode": "urlencoded",
          "urlencoded": [],
          "options": {
            "urlencoded": {}
          }
        },
        "url": "{{oidc_provider}}userinfo"
      },
      "response": []
    },
    {
      "name": "/token invalid grant test (grant has used)",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "4bf7af09-414c-4b1b-8c0d-8fa6422b7038",
            "exec": [
              "",
              "pm.test(\"invalid_grant should return 400\", function () {",
              "    pm.response.to.have.status(400);",
              "    var jsonData=pm.response.json();",
              "    console.log(\"values\"+jsonData.error);",
              "    var error=jsonData.error;",
              "    pm.expect(jsonData.error).to.include(\"invalid_request\");",
              "    pm.expect(jsonData.error_description).to.be.that.include(\"Invalid assertion. Invalid parameter value. \");",
              "    ",
              "  ",
              "console.log(\"values\"+jsonData.error_description);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "_postman_id": "32df9a2b-f45d-41a8-921e-ada196775aca",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": {
            "token": "{{access_token_sp}}"
          }
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "name": "Content-Type",
            "value": "application/x-www-form-urlencoded",
            "type": "text"
          },
          {
            "key": "Accept",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "urlencoded",
          "urlencoded": [
            {
              "key": "grant_type",
              "value": "urn:ietf:params:oauth:grant-type:jwt-bearer",
              "type": "text"
            },
            {
              "key": "assertion",
              "value": "{{assertion}}",
              "type": "text"
            }
          ],
          "options": {
            "urlencoded": {}
          }
        },
        "url": "{{oidc_provider}}/token"
      },
      "response": []
    },
    {
      "name": "/token invalid grant test (expired grant )",
      "event": [
        {
          "listen": "test",
          "script": {
            "id": "4bf7af09-414c-4b1b-8c0d-8fa6422b7038",
            "exec": [
              "",
              "pm.test(\"invalid_grant should return 400\", function () {",
              "    pm.response.to.have.status(400);",
              "    var jsonData=pm.response.json();",
              "    console.log(\"values\"+jsonData.error);",
              "    var errorvalues=jsonData.error;",
              "    pm.expect(jsonData.error).to.include(\"invalid_grant\");",
              "    pm.expect(jsonData.error_description).to.include(\"Invalid assertion. Client authentication failed. Expired JWT.\");",
              " });"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "_postman_id": "ae3ed213-bf5b-477c-9604-bb35535056f5",
      "protocolProfileBehavior": {
        "disableBodyPruning": true
      },
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": {
            "token": "{{access_token_sp}}"
          }
        },
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "name": "Content-Type",
            "value": "application/x-www-form-urlencoded",
            "type": "text"
          },
          {
            "key": "Accept",
            "value": "application/json",
            "type": "text"
          }
        ],
        "body": {
          "mode": "urlencoded",
          "urlencoded": [
            {
              "key": "grant_type",
              "value": "urn:ietf:params:oauth:grant-type:jwt-bearer",
              "type": "text"
            },
            {
              "key": "assertion",
              "value": "eyJ4NWMiOlsiTUlJRkVUQ0NBXC9tZ0F3SUJBZ0lMQVVrblRnempPNTM2MHk4d0RRWUpLb1pJaHZjTkFRRUxCUUF3VVRFTE1Ba0dBMVVFQmhNQ1RrOHhIVEFiQmdOVkJBb01GRUoxZVhCaGMzTWdRVk10T1Rnek1UWXpNekkzTVNNd0lRWURWUVFEREJwQ2RYbHdZWE56SUVOc1lYTnpJRE1nVkdWemREUWdRMEVnTXpBZUZ3MHhOekEyTVRJd09EVTJNVEZhRncweU1EQTJNVEl5TVRVNU1EQmFNSGN4Q3pBSkJnTlZCQVlUQWs1UE1Td3dLZ1lEVlFRS0RDTkVTVkpGUzFSUFVrRlVSVlFnUms5U0lFWlBVbFpCVEZST1NVNUhJRTlISUVsTFZERVNNQkFHQTFVRUN3d0pUMGxFUXlCMFpYTjBNUkl3RUFZRFZRUUREQWxFU1VaSklGUkZVMVF4RWpBUUJnTlZCQVVUQ1RrNU1UZ3lOVGd5TnpDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTmduVWJpWFBtZ0E4T0J4blBhNFpsUkhLTlNpUjFPUUlqMXdZS0hyejRVMUhvV21HNStWVFpQWGJobVJ4MjBsR3FRV3JDMG1xVjJsXC9CclNUVHBNdW1vdFBNV01RTW1sVXdXcTBBWGRRRHgzSDVCR1lhNjZzVjU2eEl2QzRsektJMkVBR2pzeGRkZThYdzdheXBFNXVKXC9PVk15Y2JcL3c2bHFvRGlzOHRIeGlOMEs0WitJbFVMdnBmQ1k1NlA3QytjdVN6RlU3VVlramJ6OStYdVdabGdKRmZ3MmpBQVhnNnN6elorbHZsZUFJKzZvVXUzSGZwbnVKZUJST1wveGZEdmtjXC8wY0lQRlJIQUVlWjhuUXdic0VpK09WU0VGeVludFNXM1MwUGI5WW1KazBDSWl1Y0xuVlhKNVZCd3lsNldzYkRyY2tZZDZKT21iWEpHRVRcL050ZWhNQ0F3RUFBYU9DQWNJd2dnRytNQWtHQTFVZEV3UUNNQUF3SHdZRFZSMGpCQmd3Rm9BVVA2NzFlQXVTbzNBZ05WOWErdmNrb0ZJQjhFRXdIUVlEVlIwT0JCWUVGRWV5ZGR0S2tjZGl5RnR5dmIxblp3d0ViblRBTUE0R0ExVWREd0VCXC93UUVBd0lHUURBV0JnTlZIU0FFRHpBTk1Bc0dDV0NFUWdFYUFRQURBakNCdXdZRFZSMGZCSUd6TUlHd01EZWdOYUF6aGpGb2RIUndPaTh2WTNKc0xuUmxjM1EwTG1KMWVYQmhjM011Ym04dlkzSnNMMEpRUTJ4aGMzTXpWRFJEUVRNdVkzSnNNSFdnYzZCeGhtOXNaR0Z3T2k4dmJHUmhjQzUwWlhOME5DNWlkWGx3WVhOekxtNXZMMlJqUFVKMWVYQmhjM01zWkdNOVRrOHNRMDQ5UW5WNWNHRnpjeVV5TUVOc1lYTnpKVEl3TXlVeU1GUmxjM1EwSlRJd1EwRWxNakF6UDJObGNuUnBabWxqWVhSbFVtVjJiMk5oZEdsdmJreHBjM1F3Z1lvR0NDc0dBUVVGQndFQkJINHdmREE3QmdnckJnRUZCUWN3QVlZdmFIUjBjRG92TDI5amMzQXVkR1Z6ZERRdVluVjVjR0Z6Y3k1dWJ5OXZZM053TDBKUVEyeGhjM016VkRSRFFUTXdQUVlJS3dZQkJRVUhNQUtHTVdoMGRIQTZMeTlqY25RdWRHVnpkRFF1WW5WNWNHRnpjeTV1Ynk5amNuUXZRbEJEYkdGemN6TlVORU5CTXk1alpYSXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRWNqS3FKdTNOb2FPRUNZVGVrNjZ3TmZqVzlpUnowVllMbHBiYzVBRkVjMmN1RWlld05SNlNoME1vNFRmeFpEVkFsaTJaaUVXYytybHZGYVMyaGJlYlIrYktVcnlQY1ZGU0NBdEM3MkQ0amE2ek1qdStOcHZFZXRUbjZrODFXZ2ZzZ2p4NlhOakpZY1wvNlFOanZUNE4yMmFkRXd5TXZoRThsamtTZzRkXC91ZFF5aTJEUWRIdDBTaHFcL1dLMDY4TitoS1JnK1JJSWRDdTZJbDlGU25keVlPMGF6V1pwY2p1akhWSDdwOHFLVlo1OEc4N0hEaUM2RmNwZVpCT216VFwvTzdYaVN5MTQxVTQzSmVGS0JYa1Z1cEMwT1lQb3NZR1BubXpFeHFXTHliZ2tiT1wvZFNsOG9EVHpJSWlmdnh5Q2QyaU1FQWMwNytPdUVlZkVUekF4anFCSE09Il0sImFsZyI6IlJTMjU2In0.eyJhdWQiOiJodHRwczpcL1wvZWlkLXN5c3Rlc3Qtd2ViMDEuZG16LmxvY2FsXC9pZHBvcnRlbi1vaWRjLXByb3ZpZGVyXC8iLCJzY29wZSI6Im9wZW5pZCBwcm9maWxlIGlkcG9ydGVuOnNjb3Blcy53cml0ZSBpZHBvcnRlbjpzY29wZXMucmVhZCB0b2tlbmluZm8gaWRwb3J0ZW46YXV0aG9yaXphdGlvbnMucmV2b2tlIiwiaXNzIjoib2lkY190ZXN0X2FwaS1wb3N0bWFuIiwiZXhwIjoxNTY4MTk2NjE2LCJpYXQiOjE1NjgxOTY0OTYsImp0aSI6ImU1ZTU4ZDIzLWJjMjYtNDU0Mi1iMDkyLTgzNmE4OGMzYzg2NiJ9.bQpiG8MGSafrmpLAu948MQnW2EtZCunc4PMtYGeuW3FGxQtZVvRtN5_OWgRQWIubCOH4rzQARtEz52uuO4vo1kbMtUSr6H5ZHUGq1OPYW_9evj98uFeUbWlB-Xt4CS7bG0LhuFjlF7guG23jLG4yvhxwZW_PCR8ettbhbzAm-GqFExfXvXk6M2hJUzKWGt0VPAGvS3wf1gOlc9-D8lV0yk2abJGHDEofYdsltlguNX5he6xA5QQyF-Qy8kEgJnLHQl6tsnq-EOMgT3FVKJ0rg_kwpnnz_Q61h_Hn7SZBmD_CSuSEyDwm20yMIzyb1uca9SRkfk8vXchdL83V2gCwhA",
              "type": "text"
            }
          ],
          "options": {
            "urlencoded": {}
          }
        },
        "url": "{{oidc_provider}}/token"
      },
      "response": []
    }
  ]
}
{
  "info": {
    "_postman_id": "f7e02c7c-057d-496a-a583-b5c94d434a7a",
    "name": "Ondemand_Eventlog_API",
    "schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
  },
  "item": [
    {
      "name": "Hente gyldig accesstoken med riktig scope",
      "item": [
        {
          "name": "postreq",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "713e1a24-6a6c-4137-b6ec-ec8c924b3c95",
                "exec": [
                  "var jsonData=pm.response.json();",
                  "pm.globals.set(\"session\",jsonData.sessionId);",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "4b4e1d1d-b235-4c4f-ab3a-bec135c71ada",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"desiredCapabilities\": {\r\n        \"caps\": {\r\n            \"nativeEvents\": false,\r\n            \"browserName\": \"chrome\",\r\n            \"version\": \"\",\r\n            \"platform\": \"ANY\"\r\n        }\r\n    }\r\n}"
            },
            "url": "http://chromedriver:4444/session"
          },
          "response": [
            {
              "id": "e0d2f681-e607-4070-bf96-bf7846f1cc1a",
              "name": "postreq",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "name": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"desiredCapabilities\": {\r\n        \"caps\": {\r\n            \"nativeEvents\": false,\r\n            \"browserName\": \"chrome\",\r\n            \"version\": \"\",\r\n            \"platform\": \"ANY\"\r\n\r\n        }\r\n    }\r\n}"
                },
                "url": "http://localhost:9515/session"
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "Text",
              "header": [],
              "cookie": [],
              "responseTime": null,
              "body": ""
            }
          ]
        },
        {
          "name": "navigatetooidcclienturl",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "227958f2-7dc9-4d24-a52e-9381fe8f9734",
                "exec": [
                  "tests[\"sessionId\"]=responseBody.has(\"sessionId\");",
                  "tests[\"client_id is status\"]=responseBody.has(\"status\");",
                  "tests[\"value\"]=responseBody.has(\"value\");",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "bf0ae313-ce42-4bed-b04c-43aa03734365",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"url\":\"{{idporten_oidc_client_url}}\"}\n"
            },
            "url": "http://chromedriver:4444/session/{{session}}/url"
          },
          "response": []
        },
        {
          "name": "findclientelementid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1d20f14d-4667-407b-b870-4b0051ebd97b",
                "exec": [
                  "pm.test(\"find element id for client_id \", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"client_id\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "05894fc4-b2a9-4863-b9de-fb060d0a1a8b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"name\",\"value\":\"client_id\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "selectdropdown",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a9c5f504-80da-4b67-bd66-86c7cb3558c4",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "9291f9be-c084-4cc6-b6cb-024546b2c9f8",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{client_id}}/click"
          },
          "response": []
        },
        {
          "name": "clickenter",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "93942b66-73f7-40cd-816a-8f6eac550aec",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "560ec849-52f6-46a5-b76d-67831f6f2bca",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"\\uE007\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{client_id}}/value"
          },
          "response": []
        },
        {
          "name": "findscopeid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1d20f14d-4667-407b-b870-4b0051ebd97b",
                "exec": [
                  "pm.test(\"Scope element id\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"scope\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "9d9a1297-a367-4691-9b59-204caf4be06a",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"name\",\"value\":\"scope\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setscope",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e65befc8-4e49-43f6-a2bc-3ebfdc77a6dc",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "f93f4858-a1fe-42f1-8cfb-ce24add3cbf4",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"   user/kontaktinformasjon.read user/spraak.read  user/spraak.write idporten:user.log.read idporten:user.log.read idporten:user.log.all.read krr:user.log.all.read\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{scope}}/value"
          },
          "response": []
        },
        {
          "name": "findloginelementid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "1d20f14d-4667-407b-b870-4b0051ebd97b",
                "exec": [
                  "pm.test(\"Your test name\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"loginid\", jsonData.value.ELEMENT);",
                  "",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "3f202fcf-b357-48d8-93f7-92b6b1cb3287",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"login\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clicklogin",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "a9c5f504-80da-4b67-bd66-86c7cb3558c4",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "prerequest",
              "script": {
                "id": "5f95f475-e14e-4a9f-9448-803200c232cd",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "f2cc83a9-41b9-46e9-826f-419121e6f246",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "type": "text",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{loginid}}/click"
          },
          "response": []
        },
        {
          "name": "elementonthispage",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "4d4bd4ba-154b-4b05-923d-64e1d36be0a1",
                "exec": [
                  "pm.test(\"Your test name\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"minid_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "35db2e6f-9268-4aec-9798-79774e00c504",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/x-www-form-urlencoded",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"MinIDChain\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clickonminid",
          "_postman_id": "b04bc5bb-18a5-4281-8218-8df435667246",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{minid_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getelementidssn",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "189f83ec-8efd-438c-b133-0fbc201abad0",
                "exec": [
                  "var jsonData = pm.response.json();",
                  " pm.globals.set(\"ssn_elementid\", jsonData.value.ELEMENT);",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "8acbb1d7-7f91-4d84-b642-b0f1747902f6",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_USERNAME_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "getelementidpassword",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "8929c791-35e2-41f7-8b0b-8678e9309e58",
                "exec": [
                  "var jsonData = pm.response.json();",
                  " pm.globals.set(\"password_elementid\", jsonData.value.ELEMENT);",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "93c9299a-e88c-409f-af0e-4e035a0fdc02",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_PASSWORD_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setssn",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "e65befc8-4e49-43f6-a2bc-3ebfdc77a6dc",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "7b8a85e5-005f-4915-91e2-79e43db5af63",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"{{ssn}}\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{ssn_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "setpassword",
          "_postman_id": "a04ba296-40c5-4cda-b91d-f3085f5fffd7",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"password01\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{password_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "submit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "d4ee6a6d-0d1e-4948-aaa6-a2829f185475",
                "exec": [
                  "pm.test(\"next_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"next_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "d9b246ba-af86-41cb-b7c5-22c297d1ee36",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"nextbtn\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "clicksubmit",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "e75ea17b-88ea-4c32-b35f-8758d03c48c1",
                "exec": [
                  "setTimeout(checkStatusCode, 500);\r",
                  "\r",
                  "    function checkStatusCode() {\r",
                  "\r",
                  "        pm.sendRequest('https://postman-echo.com/get', function (err, res) {\r",
                  "\r",
                  "            tests['status code should be 200']= res.code ===200;\r",
                  "\r",
                  "        });\r",
                  "    }"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "127813b8-8403-4a4a-81ef-d23ec2b826e4",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{next_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "pinnumberid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "49f2b57c-29a8-41bf-9041-7400083bf039",
                "exec": [
                  "pm.test(\"pin_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"pin_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "0e140e64-8b92-4a50-a23c-f34493096a67",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"input_PINCODE1_IDPORTEN\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "setppin",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "95b50532-96b7-405c-afd1-52b576a70e9f",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "fbc92df0-ab13-4d0e-bcc8-782339599721",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"value\":[\"12345\"]}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{pin_elementid}}/value"
          },
          "response": []
        },
        {
          "name": "getsubmitid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "02b4c223-cb45-4310-b064-d60510887571",
                "exec": [
                  "pm.test(\"submit_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"submit_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "a5780cc8-7104-440d-bc53-772436bce15d",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"nextbtn\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "finalsubmit ",
          "_postman_id": "32429612-2c4e-4052-86de-5c4ebf641930",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{submit_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getconsentid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "02b4c223-cb45-4310-b064-d60510887571",
                "exec": [
                  "pm.test(\"consent_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"consent_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "dd2af005-597b-4657-9231-bb7f557b3c93",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"name\",\"value\":\"consentAccepted\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "acceptconsent",
          "_postman_id": "26259862-fa0a-483b-84a7-f04b7841fc02",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "file",
              "file": {
                "src": ""
              }
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{consent_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "gettokenid",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "02b4c223-cb45-4310-b064-d60510887571",
                "exec": [
                  "pm.test(\"token_elementid\", function () {",
                  "    var jsonData = pm.response.json();",
                  " pm.globals.set(\"token_elementid\", jsonData.value.ELEMENT);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "d6b4def1-ca38-4bf6-861f-8b7171ac5546",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\"using\":\"id\",\"value\":\"get-tokens\"}"
            },
            "url": "http://chromedriver:4444/session/{{session}}/element"
          },
          "response": []
        },
        {
          "name": "henttoken",
          "_postman_id": "667dabd6-8a96-4471-bba1-1aea8f6aaa3f",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [],
            "body": {
              "mode": "file",
              "file": {
                "src": ""
              }
            },
            "url": "http://chromedriver:4444/session/{{session}}/element/{{token_elementid}}/click"
          },
          "response": []
        },
        {
          "name": "getTokensElements",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "02b4c223-cb45-4310-b064-d60510887571",
                "exec": [
                  "pm.test(\"tokens\", function () {",
                  " var jsonData = pm.response.json();",
                  " console.log('tokens test jsonData',jsonData);",
                  " var tokens=jsonData.value;",
                  "  console.log('tokens test tokens',tokens);",
                  " var temptoken=tokens.split('access_token:').pop();",
                  "   console.log('tokens test temptoken',temptoken);",
                  " var refreshtokenpos=temptoken.lastIndexOf(\"refresh_token:\");",
                  "    console.log('tokens test refreshtokenpos',refreshtokenpos);",
                  " var token = temptoken.substring(1,refreshtokenpos-1);    ",
                  " pm.environment.set(\"eventlog_token\", token);",
                  "     ",
                  "console.log('eventlog_token',pm.environment.get(\"eventlog_token\"));",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "18379644-4813-4e70-91ea-294a4a91fe3b",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": "http://chromedriver:4444/session/{{session}}/source"
          },
          "response": []
        }
      ],
      "_postman_id": "b23ba4e3-9b3c-4d55-a43a-cb3a434b701f",
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "id": "4e0dc75c-1785-4fac-a98f-121ea8a60141",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        },
        {
          "listen": "test",
          "script": {
            "id": "dc0686a3-bc5a-4282-a7cc-7536756437b3",
            "type": "text/javascript",
            "exec": [
              ""
            ]
          }
        }
      ]
    },
    {
      "name": "Logg-innslag",
      "item": [
        {
          "name": "/logg/idporten",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "75ea3cc3-43ca-4719-b8de-974667c6ad94",
                "exec": [
                  "",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "pm.test(\"Test will check integrasjon_id\", function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData[0].integrasjon_id).to.eql(\"test_rp_atest\");",
                  "",
                  "});",
                  "",
                  "",
                  "pm.test(\"response must be valid and have a body\", function () {",
                  "     // assert that the status code is 200",
                  "     pm.response.to.be.ok; // info, success, redirection, clientError,  serverError, are other variants",
                  "     // assert that the response has a valid JSON body",
                  "     pm.response.to.be.withBody;",
                  "     pm.response.to.be.json; // this assertion also checks if a body  exists, so the above check is not needed",
                  "});",
                  "",
                  "pm.test(\"response should be okay to process\", function () { ",
                  "    pm.response.to.not.be.error; ",
                  "    pm.response.to.not.have.jsonBody(\"error\"); ",
                  "});",
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});",
                  "tests[\"tidspunkt is present\"]=responseBody.has(\"tidspunkt\");",
                  "tests[\"tjeneste is present\"]=responseBody.has(\"tjeneste\");",
                  "tests[\"eid is present\"]=responseBody.has(\"eid\");",
                  "tests[\"integrasjon_id is present\"]=responseBody.has(\"integrasjon_id\");",
                  "tests[\"orgno is present\"]=responseBody.has(\"orgno\");",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "0a90a173-0390-4d41-bb93-3b6eaa1d5098",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{eventlog_token}}"
              }
            },
            "method": "GET",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"ssn\": 23079403164\r\n\r\n}"
            },
            "url": {
              "raw": "https://eid-atest-web01.dmz.local/eventlog-api/logg/idporten?maxhits=1",
              "protocol": "https",
              "host": [
                "eid-atest-web01",
                "dmz",
                "local"
              ],
              "path": [
                "eventlog-api",
                "logg",
                "idporten"
              ],
              "query": [
                {
                  "key": "maxhits",
                  "value": "1"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "/rest/v1/person",
          "event": [
            {
              "listen": "prerequest",
              "script": {
                "id": "299aba29-2bbf-43bd-bdf9-bec968ee3a7c",
                "exec": [
                  ""
                ],
                "type": "text/javascript"
              }
            },
            {
              "listen": "test",
              "script": {
                "id": "ecf1e525-3977-432c-bfcf-2dd6115e5a49",
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "",
                  "    ",
                  "console.log(\"header : \" + request.headers[\"Content-Type\"]);",
                  "console.log(\"authorization : \" + request.headers[\"Authorization\"]);",
                  "console.log(\"body : \" + request.data);",
                  "console.log(\"url : \" + request.url);",
                  "    ",
                  "});",
                  "",
                  "",
                  "",
                  "pm.test(\"response must be valid and have a body\", function () {",
                  "     // assert that the status code is 200",
                  "     pm.response.to.be.ok; // info, success, redirection, clientError,  serverError, are other variants",
                  "     // assert that the response has a valid JSON body",
                  "     pm.response.to.be.withBody;",
                  "     pm.response.to.be.json; // this assertion also checks if a body  exists, so the above check is not needed",
                  "});",
                  "",
                  "pm.test(\"response should be okay to process\", function () { ",
                  "    pm.response.to.not.be.error; ",
                  "    pm.response.to.not.have.jsonBody(\"error\"); ",
                  "});",
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "ec79b8fc-c102-4763-bf9b-0f8ca1d2b82c",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{eventlog_token}}"
              }
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/javascript",
                "type": "text"
              }
            ],
            "url": "{{krr_oauth2_server}}/rest/v1/person/"
          },
          "response": []
        }
      ],
      "_postman_id": "ec850ca2-d6e2-45d0-895f-006b2f485c1b"
    },
    {
      "name": "Bruka av kontaktinfo",
      "item": [
        {
          "name": "/logg/kontaktregisteret/all",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "75ea3cc3-43ca-4719-b8de-974667c6ad94",
                "exec": [
                  "",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    var jsonData = pm.response.json();",
                  "    console.log(\"bruk av kontaktinfo from atest\",jsonData);",
                  "    ",
                  "    tests[\"timeStamp is present\"]=responseBody.has(\"timeStamp\");",
                  "tests[\"informasjonsbehov is present\"]=responseBody.has(\"informasjonsbehov\");",
                  "tests[\"log_type is present\"]=responseBody.has(\"log_type\");",
                  "tests[\"log_type_description is present\"]=responseBody.has(\"log_type_description\");",
                  "tests[\"orgno is present\"]=responseBody.has(\"orgno\");",
                  "tests[\"person_identifier is present\"]=responseBody.has(\"person_identifier\");",
                  "});",
                  "",
                  "",
                  "pm.test(\"response must be valid and have a body\", function () {",
                  "     // assert that the status code is 200",
                  "     pm.response.to.be.ok; // info, success, redirection, clientError,  serverError, are other variants",
                  "     // assert that the response has a valid JSON body",
                  "     pm.response.to.be.withBody;",
                  "     pm.response.to.be.json; // this assertion also checks if a body  exists, so the above check is not needed",
                  "});",
                  "",
                  "pm.test(\"response should be okay to process\", function () { ",
                  "    pm.response.to.not.be.error; ",
                  "    pm.response.to.not.have.jsonBody(\"error\"); ",
                  "});",
                  "pm.test(\"Content-Type is present\", function () {",
                  "    pm.response.to.have.header(\"Content-Type\");",
                  "});",
                  "",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "c7d98146-494d-4020-922d-730530d24c54",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "bearer",
              "bearer": {
                "token": "{{eventlog_token}}"
              }
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n  \"ssn\": 23079403164\r\n\r\n}"
            },
            "url": "https://eid-atest-web01.dmz.local/eventlog-api/logg/kontaktregisteret/all"
          },
          "response": []
        }
      ],
      "_postman_id": "a1851434-a455-43bb-868b-5450a2efd1eb"
    },
    {
      "name": "getToken",
      "item": [
        {
          "name": "getJWTGrant",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "07d3c752-d030-406e-8a0f-aeef1c7c522f",
                "exec": [
                  "pm.globals.set(\"oidc_maskinporten_assertion\",pm.response.text());"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "58867a06-ddea-4014-9cfb-a3299d43e3de",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/json",
                "type": "text",
                "disabled": true
              }
            ],
            "url": {
              "raw": "{{jwt_grant_url}}?issuer={{client_id}}&audience={{oidc_provider}}&scope=idporten:dcr.read idporten:dcr.write idporten:dcr.modify",
              "host": [
                "{{jwt_grant_url}}"
              ],
              "query": [
                {
                  "key": "issuer",
                  "value": "{{client_id}}"
                },
                {
                  "key": "audience",
                  "value": "{{oidc_provider}}"
                },
                {
                  "key": "scope",
                  "value": "idporten:dcr.read idporten:dcr.write idporten:dcr.modify"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "get Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "id": "b0e7b679-e713-4d63-bc0f-23549e824e8a",
                "exec": [
                  "",
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "    var jsonData=pm.response.json();",
                  "    pm.globals.set(\"access_token_sp\",jsonData.access_token);",
                  "",
                  "});",
                  ""
                ],
                "type": "text/javascript"
              }
            }
          ],
          "_postman_id": "215baeb2-eb4c-4f69-80c3-a4704eed5071",
          "protocolProfileBehavior": {
            "disableBodyPruning": true
          },
          "request": {
            "auth": {
              "type": "noauth"
            },
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "name": "Content-Type",
                "value": "application/x-www-form-urlencoded",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "urlencoded",
              "urlencoded": [
                {
                  "key": "grant_type",
                  "value": "urn:ietf:params:oauth:grant-type:jwt-bearer",
                  "type": "text"
                },
                {
                  "key": "assertion",
                  "value": "{{oidc_maskinporten_assertion}}",
                  "type": "text"
                }
              ],
              "options": {
                "urlencoded": {}
              }
            },
            "url": "{{oidc_provider_url}}/idporten-oidc-provider/token"
          },
          "response": []
        }
      ],
      "_postman_id": "b0dbebd5-c00c-469d-8956-978af82392db"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": {
      "token": "{{accesstoken_eventlogapi}}"
    }
  },
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "id": "06e2aacf-02c4-4094-86ca-caf761067cf2",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "id": "655b6888-b408-4dd0-9e56-b78d460b61eb",
        "type": "text/javascript",
        "exec": [
          ""
        ]
      }
    }
  ]
}